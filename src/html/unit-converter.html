<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for better looks with Tailwind */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Style for number input arrows */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield; /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">
    <div class="container mx-auto max-w-6xl bg-white p-6 sm:p-8 rounded-xl shadow-2xl">
        <h1 class="text-3xl sm:text-4xl font-bold text-center mb-8 sm:mb-12 text-sky-600">Unit Converter</h1>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 mb-10 sm:mb-16">
            <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-5 text-sky-700">Length</h3>
                <div class="mb-4">
                    <label for="lengthInput" class="block text-sm font-medium text-gray-700 mb-1">Enter Value:</label>
                    <input id="lengthInput" placeholder="Enter Value Here" type="number" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                </div>
                <div class="mb-4">
                    <label for="length" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                    <select id="length" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="0.01">Centimeters</option>
                        <option value="0.3048">Feet</option>
                        <option value="0.0254">Inches</option>
                        <option value="1000">Kilometers</option>
                        <option value="1" selected>Meters</option>
                        <option value="1609.344">Miles</option>
                        <option value="0.001">Millimeter</option>
                        <option value="0.9144">Yards</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="length2" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                    <select id="length2" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="0.01">Centimeters</option>
                        <option value="0.3048" selected>Feet</option>
                        <option value="0.0254">Inches</option>
                        <option value="1000">Kilometers</option>
                        <option value="1">Meters</option>
                        <option value="1609.344">Miles</option>
                        <option value="0.001">Millimeter</option>
                        <option value="0.9144">Yards</option>
                    </select>
                </div>
                <button onclick="lengthConvert()" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md mb-4">Convert</button>
                <p id="lengthOutput" class="mt-4 p-3 bg-sky-50 text-sky-700 rounded-md min-h-[50px] flex items-center justify-center text-center text-sm sm:text-base break-all">The Answer will Be Located Here</p>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-5 text-sky-700">Area</h3>
                <div class="mb-4">
                    <label for="AreaInput" class="block text-sm font-medium text-gray-700 mb-1">Enter Value:</label>
                    <input id="AreaInput" placeholder="Enter Value Here" type="number" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                </div>
                <div class="mb-4">
                    <label for="Area" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                    <select id="Area" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="4046.8564224" selected>Acres</option>
                        <option value="10000">Hectares</option>
                        <option value="0.09290304">Square Feet</option>
                        <option value="1">Square Meters</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="Area2" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                    <select id="Area2" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="4046.8564224">Acres</option>
                        <option value="10000" selected>Hectares</option>
                        <option value="0.09290304">Square Feet</option>
                        <option value="1">Square Meters</option>
                    </select>
                </div>
                <button onclick="areaConvert()" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md mb-4">Convert</button>
                <p id="AreaOutput" class="mt-4 p-3 bg-sky-50 text-sky-700 rounded-md min-h-[50px] flex items-center justify-center text-center text-sm sm:text-base break-all">The Answer will Be Located Here</p>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-5 text-sky-700">Volume</h3>
                <div class="mb-4">
                    <label for="VolumeInput" class="block text-sm font-medium text-gray-700 mb-1">Enter Value:</label>
                    <input id="VolumeInput" placeholder="Enter Value Here" type="number" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                </div>
                <div class="mb-4">
                    <label for="Volume" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                    <select id="Volume" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="1233.48185532" selected>Acre Feet</option>
                        <option value="1">Cubic Meters</option>
                        <option value="0.003785411784">Gallons [US]</option>
                        <option value="0.00454609">Gallons [Imperial]</option>
                        <option value="0.001">Litres</option>
                        <option value="0.000001">Milliliters</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="Volume2" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                    <select id="Volume2" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="1233.48185532">Acre Feet</option>
                        <option value="1" selected>Cubic Meters</option>
                        <option value="0.003785411784">Gallons [US]</option>
                        <option value="0.00454609">Gallons [Imperial]</option>
                        <option value="0.001">Litres</option>
                        <option value="0.000001">Milliliters</option>
                    </select>
                </div>
                <button onclick="volumeConvert()" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md mb-4">Convert</button>
                <p id="VolumeOutput" class="mt-4 p-3 bg-sky-50 text-sky-700 rounded-md min-h-[50px] flex items-center justify-center text-center text-sm sm:text-base break-all">The Answer will Be Located Here</p>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-5 text-sky-700">Flowrate</h3>
                <div class="mb-4">
                    <label for="FlowrateInput" class="block text-sm font-medium text-gray-700 mb-1">Enter Value:</label>
                    <input id="FlowrateInput" placeholder="Enter Value Here" type="number" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                </div>
                <div class="mb-4">
                    <label for="Flowrate" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                    <select id="Flowrate" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="0.00003908668" selected>Acre Feet/Year</option>
                        <option value="0.01427641018">Acre Feet/Day</option>
                        <option value="0.34263384444">Acre Feet/Hour</option>
                        <option value="20.55803066666667">Acre Feet/Minute</option>
                        <option value="1233.48184">Acre Feet/Second</option>
                        <option value="3.16880767e-8">Cubic Meters/Year</option>
                        <option value="0.00001157407">Cubic Meters/Day</option>
                        <option value="0.00027777777">Cubic Meters/Hour</option>
                        <option value="0.01666666666">Cubic Meters/Minute</option>
                        <option value="1">Cubic Meters/Second</option>
                        <option value="1.440569e-10">Gallon/Year [Imperial]</option>
                        <option value="5.26167824e-8">Gallon/Day [Imperial]</option>
                        <option value="0.0000012628">Gallon/Hour [Imperial]</option>
                        <option value="0.00007576816">Gallon/Minute [Imperial]</option>
                        <option value="0.00454609">Gallon/Second [Imperial]</option>
                        <option value="1.1995246e-10">Gallon/Year [US]</option>
                        <option value="4.38126364e-8">Gallon/Day [US]</option>
                        <option value="0.0000010515">Gallon/Hour [US]</option>
                        <option value="0.00006309019">Gallon/Minute [US]</option>
                        <option value="0.003785411784">Gallon/Second [US]</option>
                        <option value="3.1688088e-11">Litre/Year</option>
                        <option value="1.15740741e-8">Litre/Day</option>
                        <option value="2.77777778e-7">Litre/Hour</option>
                        <option value="0.00001666666">Litre/Minute</option>
                        <option value="0.001">Litre/Second</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="Flowrate2" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                    <select id="Flowrate2" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                        <option value="0.00003908668">Acre Feet/Year</option>
                        <option value="0.01427641018">Acre Feet/Day</option>
                        <option value="0.34263384444">Acre Feet/Hour</option>
                        <option value="20.55803066666667">Acre Feet/Minute</option>
                        <option value="1233.48184">Acre Feet/Second</option>
                        <option value="3.16880767e-8">Cubic Meters/Year</option>
                        <option value="0.00001157407" selected>Cubic Meters/Day</option>
                        <option value="0.00027777777">Cubic Meters/Hour</option>
                        <option value="0.01666666666">Cubic Meters/Minute</option>
                        <option value="1">Cubic Meters/Second</option>
                        <option value="1.440569e-10">Gallon/Year [Imperial]</option>
                        <option value="5.26167824e-8">Gallon/Day [Imperial]</option>
                        <option value="0.0000012628">Gallon/Hour [Imperial]</option>
                        <option value="0.00007576816">Gallon/Minute [Imperial]</option>
                        <option value="0.00454609">Gallon/Second [Imperial]</option>
                        <option value="1.1995246e-10">Gallon/Year [US]</option>
                        <option value="4.38126364e-8">Gallon/Day [US]</option>
                        <option value="0.0000010515">Gallon/Hour [US]</option>
                        <option value="0.00006309019">Gallon/Minute [US]</option>
                        <option value="0.003785411784">Gallon/Second [US]</option>
                        <option value="3.1688088e-11">Litre/Year</option>
                        <option value="1.15740741e-8">Litre/Day</option>
                        <option value="2.77777778e-7">Litre/Hour</option>
                        <option value="0.00001666666">Litre/Minute</option>
                        <option value="0.001">Litre/Second</option>
                    </select>
                </div>
                <button onclick="flowrateConvert()" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md mb-4">Convert</button>
                <p id="FlowrateOutput" class="mt-4 p-3 bg-sky-50 text-sky-700 rounded-md min-h-[50px] flex items-center justify-center text-center text-sm sm:text-base break-all">The Answer will Be Located Here</p>
            </div>
        </div>

        <div class="mb-10 sm:mb-16">
            <h2 class="text-2xl sm:text-3xl font-semibold mb-4 text-center text-sky-600">Latitude and Longitude</h2>
            <p class="text-xs sm:text-sm text-center text-gray-500 mb-2"><em>*Only North American coordinates will be correctly converted.</em></p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 mt-6">
                <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-5 text-sky-700">Latitude</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Degree Minute Seconds</label>
                            <div class="flex space-x-2 items-center mt-1">
                                <input id="degrees" placeholder="Degrees(0-60)" type="number" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="minutes" placeholder="Minutes(0-60)" type="number" step="any" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="seconds" placeholder="Seconds(0-60)" type="number" step="any" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <span class="ml-1 text-sm text-gray-600">North</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Degree Decimal Minutes</label>
                            <div class="flex space-x-2 items-center mt-1">
                                <input id="decimal" placeholder="Degrees(0-60)" type="number" class="w-1/2 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="minutesDD" placeholder="Decimal Minutes(0-60)" type="number" step="any" class="w-1/2 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                            </div>
                        </div>
                        <div>
                            <label for="ddLati" class="block text-sm font-medium text-gray-700 mb-1">Decimal Degrees</label>
                            <input id="ddLati" placeholder="Decimal Degree(0-60)" type="number" step="any" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow mt-1">
                        </div>
                    </div>
                    <button id="clearLatitude" class="mt-6 w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md">Clear</button>
                </div>

                <div class="p-6 bg-gray-50 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-5 text-sky-700">Longitude</h3>
                    <div class="space-y-4">
                         <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Degree Minute Seconds</label>
                            <div class="flex space-x-2 items-center mt-1">
                                <input id="degreesLong" placeholder="Degrees(0-180)" type="number" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="minutesLong" placeholder="Minutes(0-60)" type="number" step="any" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="secondsLong" placeholder="Seconds(0-60)" type="number" step="any" class="flex-1 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <span class="ml-1 text-sm text-gray-600">West</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Degree Decimal Minutes <span class="text-gray-500">(-)</span></label>
                            <div class="flex space-x-2 items-center mt-1">
                                <input id="decimalDdmLong" placeholder="Degrees(0-180)" type="number" class="w-1/2 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                                <input id="minutesDdmLong" placeholder="Decimal Minutes(0-60)" type="number" step="any" class="w-1/2 min-w-0 p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow">
                            </div>
                        </div>
                        <div>
                            <label for="ddLong" class="block text-sm font-medium text-gray-700 mb-1">Decimal Degrees <span class="text-gray-500">(-)</span></label>
                            <input id="ddLong" placeholder="Decimal Degrees(0-180)" type="number" step="any" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-shadow mt-1">
                        </div>
                    </div>
                    <button id="clearLongitude" class="mt-6 w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow hover:shadow-md">Clear Long</button>
                </div>
            </div>
        </div>
        <p class="text-center text-sm text-gray-600 mt-10">
            Having trouble? Try <a href="https://www.google.ca/chrome/browser/features.html" class="text-sky-600 hover:text-sky-700 underline">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" class="text-sky-600 hover:text-sky-700 underline">Mozilla Firefox</a>
        </p>
    </div>

    <script>
        // Standard unit conversion functions - to match original output exactly
        function lengthConvert() {
            const inputEl = document.getElementById("lengthInput");
            const fromUnitEl = document.getElementById("length");
            const toUnitEl = document.getElementById("length2");
            const outputEl = document.getElementById("lengthOutput");

            let inputValue = parseFloat(inputEl.value);
            const fromUnitValue = parseFloat(fromUnitEl.value);
            const fromUnitText = fromUnitEl.options[fromUnitEl.selectedIndex].text;
            const toUnitValue = parseFloat(toUnitEl.value);
            const toUnitText = toUnitEl.options[toUnitEl.selectedIndex].text;

            if (isNaN(inputValue)) { inputValue = 0; }
            const resultNumeric = (inputValue * fromUnitValue) / toUnitValue;
            const resultString = resultNumeric.toFixed(5);
            outputEl.innerHTML = inputValue + " " + fromUnitText + "      =     " + resultString + " " + toUnitText;
        }

        function areaConvert() {
            const inputEl = document.getElementById("AreaInput");
            const fromUnitEl = document.getElementById("Area");
            const toUnitEl = document.getElementById("Area2");
            const outputEl = document.getElementById("AreaOutput");

            let inputValue = parseFloat(inputEl.value);
            const fromUnitValue = parseFloat(fromUnitEl.value);
            const fromUnitText = fromUnitEl.options[fromUnitEl.selectedIndex].text;
            const toUnitValue = parseFloat(toUnitEl.value);
            const toUnitText = toUnitEl.options[toUnitEl.selectedIndex].text;
            
            if (isNaN(inputValue)) { inputValue = 0; }
            const resultNumeric = (inputValue * fromUnitValue) / toUnitValue;
            const resultString = resultNumeric.toFixed(5);
            outputEl.innerHTML = inputValue + " " + fromUnitText + "      =     " + resultString + " " + toUnitText;
        }

        function volumeConvert() {
            const inputEl = document.getElementById("VolumeInput");
            const fromUnitEl = document.getElementById("Volume");
            const toUnitEl = document.getElementById("Volume2");
            const outputEl = document.getElementById("VolumeOutput");

            let inputValue = parseFloat(inputEl.value);
            const fromUnitValue = parseFloat(fromUnitEl.value);
            const fromUnitText = fromUnitEl.options[fromUnitEl.selectedIndex].text;
            const toUnitValue = parseFloat(toUnitEl.value);
            const toUnitText = toUnitEl.options[toUnitEl.selectedIndex].text;

            if (isNaN(inputValue)) { inputValue = 0; }
            const resultNumeric = (inputValue * fromUnitValue) / toUnitValue;
            const resultString = resultNumeric.toFixed(5);
            outputEl.innerHTML = inputValue + " " + fromUnitText + "      =     " + resultString + " " + toUnitText;
        }

        function flowrateConvert() {
            const inputEl = document.getElementById("FlowrateInput");
            const fromUnitEl = document.getElementById("Flowrate");
            const toUnitEl = document.getElementById("Flowrate2");
            const outputEl = document.getElementById("FlowrateOutput");
            
            let inputValue = parseFloat(inputEl.value);
            const fromUnitValue = parseFloat(fromUnitEl.value);
            const fromUnitText = fromUnitEl.options[fromUnitEl.selectedIndex].text;
            const toUnitValue = parseFloat(toUnitEl.value);
            const toUnitText = toUnitEl.options[toUnitEl.selectedIndex].text;

            if (isNaN(inputValue)) { inputValue = 0; }
            const resultNumeric = (inputValue * fromUnitValue) / toUnitValue;
            const resultString = resultNumeric.toFixed(5);
             outputEl.innerHTML = inputValue + " " + fromUnitText + "      =     " + resultString + " " + toUnitText;
        }

        // Latitude and Longitude conversion logic - adjusted for exact original output behavior
        window.addEventListener("load", function() {
            var b_lat_deg; 
            var e_lat_min = 0; 
            var g_lon_deg; 
            var c_lon_min = 0; 

            const degreesLat = document.getElementById("degrees");
            const minutesLat = document.getElementById("minutes");
            const secondsLat = document.getElementById("seconds");
            const decimalLat = document.getElementById("decimal"); 
            const minutesDDLat = document.getElementById("minutesDD"); 
            const ddLati = document.getElementById("ddLati"); 

            degreesLat.addEventListener("input", function() {
                const val = parseFloat(this.value);
                b_lat_deg = isNaN(val) ? (this.value === '' ? undefined : 0) : val;
                if (this.value === '') { 
                    decimalLat.value = '';
                    ddLati.value = '';
                    return;
                }
                decimalLat.value = this.value; // Keep as string to match original if non-numeric was intended
                ddLati.value = this.value;     
            });

            minutesLat.addEventListener("input", function() {
                const val = parseFloat(this.value);
                e_lat_min = isNaN(val) ? (this.value === '' ? 0 : 0) : val;
                if (this.value === '') { 
                     minutesDDLat.value = (parseFloat(decimalLat.value) || 0).toString(); // DDM Deg only
                     if (b_lat_deg !== undefined) ddLati.value = (b_lat_deg || 0).toString(); else ddLati.value = '';
                     return;
                }
                let currentSeconds = parseFloat(secondsLat.value) || 0;
                minutesDDLat.value = (e_lat_min + (currentSeconds / 60)).toString(); 
                if (b_lat_deg !== undefined) {
                     ddLati.value = (b_lat_deg + (e_lat_min / 60) + (currentSeconds / 3600)).toString(); 
                } else if (this.value !== '' && (parseFloat(decimalLat.value) || 0) !== 0 ) { // If only minutes/seconds are entered
                    ddLati.value = ((e_lat_min / 60) + (currentSeconds / 3600)).toString();
                }
            });

            secondsLat.addEventListener("input", function() {
                const currentSeconds = parseFloat(this.value) || 0;
                 if (this.value === '') { 
                    minutesDDLat.value = (e_lat_min || 0).toString();
                    if (b_lat_deg !== undefined) ddLati.value = (b_lat_deg + (e_lat_min / 60)).toString(); 
                    else ddLati.value = ((e_lat_min / 60)).toString();
                    return;
                }
                minutesDDLat.value = (e_lat_min + (currentSeconds / 60)).toString(); 
                if (b_lat_deg !== undefined) {
                    ddLati.value = (b_lat_deg + (e_lat_min / 60) + (currentSeconds / 3600)).toString(); 
                } else {
                     ddLati.value = ((e_lat_min / 60) + (currentSeconds / 3600)).toString();
                }
            });
            
            decimalLat.addEventListener("input", function() { 
                const val = parseFloat(this.value);
                b_lat_deg = isNaN(val) ? (this.value === '' ? undefined : 0) : val;
                 if (this.value === '') {
                    degreesLat.value = '';
                    // ddLati might need to be updated based on minutesDDLat if it has a value
                    let currentDDMMinutes = parseFloat(minutesDDLat.value) || 0;
                    ddLati.value = (currentDDMMinutes / 60).toString();
                    return;
                }
                degreesLat.value = this.value; 
                let currentDDMMinutes = parseFloat(minutesDDLat.value) || 0;
                ddLati.value = ( (b_lat_deg || 0) + (currentDDMMinutes / 60)).toString(); 
            });

            minutesDDLat.addEventListener("input", function() { 
                const currentDDMMinutes = parseFloat(this.value);
                if (isNaN(currentDDMMinutes) && this.value !== '') { 
                     minutesLat.value = ''; secondsLat.value = '';
                     if (b_lat_deg !== undefined) ddLati.value = (b_lat_deg || 0).toString(); else ddLati.value = '';
                     return;
                }
                if (this.value === '') {
                    minutesLat.value = ''; secondsLat.value = '';
                    if (b_lat_deg !== undefined) ddLati.value = (b_lat_deg || 0).toString(); else ddLati.value = '';
                    return;
                }

                minutesLat.value = parseInt(currentDDMMinutes).toString();
                e_lat_min = parseInt(currentDDMMinutes);
                secondsLat.value = ((currentDDMMinutes - e_lat_min) * 60).toString(); 
                
                if (b_lat_deg !== undefined) {
                    ddLati.value = (b_lat_deg + (currentDDMMinutes / 60)).toString(); 
                } else {
                     ddLati.value = (currentDDMMinutes / 60).toString();
                }
            });

            ddLati.addEventListener("input", function() { 
                const currentDD = parseFloat(this.value);
                 if (isNaN(currentDD) && this.value !== '') { 
                    degreesLat.value = ''; minutesLat.value = ''; secondsLat.value = '';
                    decimalLat.value = ''; minutesDDLat.value = '';
                    return;
                }
                 if (this.value === '') {
                    degreesLat.value = ''; minutesLat.value = ''; secondsLat.value = '';
                    decimalLat.value = ''; minutesDDLat.value = '';
                    return;
                }

                b_lat_deg = parseInt(currentDD); 
                degreesLat.value = b_lat_deg.toString();
                decimalLat.value = b_lat_deg.toString(); 
                
                const remDecimalPart = currentDD - b_lat_deg;
                minutesDDLat.value = (remDecimalPart * 60).toString(); 

                e_lat_min = parseInt(remDecimalPart * 60);
                minutesLat.value = e_lat_min.toString();
                
                secondsLat.value = (((remDecimalPart * 60) - e_lat_min) * 60).toFixed(4); 
            });

            document.getElementById("clearLatitude").addEventListener("click", function() {
                degreesLat.value = ""; minutesLat.value = ""; secondsLat.value = "";
                decimalLat.value = ""; minutesDDLat.value = ""; ddLati.value = "";
                b_lat_deg = undefined; e_lat_min = 0;
            });

            // --- Longitude Event Listeners (similar adjustments) ---
            const degreesLon = document.getElementById("degreesLong");
            const minutesLon = document.getElementById("minutesLong");
            const secondsLon = document.getElementById("secondsLong");
            const decimalDdmLon = document.getElementById("decimalDdmLong"); 
            const minutesDdmLon = document.getElementById("minutesDdmLong"); 
            const ddLon = document.getElementById("ddLong"); 

            degreesLon.addEventListener("input", function() {
                const val = parseFloat(this.value);
                g_lon_deg = isNaN(val) ? (this.value === '' ? undefined : 0) : val;
                 if (this.value === '') { 
                    decimalDdmLon.value = ''; ddLon.value = ''; return;
                }
                decimalDdmLon.value = this.value; 
                ddLon.value = this.value;     
            });

            minutesLon.addEventListener("input", function() {
                const val = parseFloat(this.value);
                c_lon_min = isNaN(val) ? (this.value === '' ? 0 : 0) : val;
                if (this.value === '') {
                     minutesDdmLon.value = (parseFloat(decimalDdmLon.value) || 0).toString();
                     if (g_lon_deg !== undefined) ddLon.value = (g_lon_deg || 0).toString(); else ddLon.value = '';
                     return;
                }
                let currentSeconds = parseFloat(secondsLon.value) || 0;
                minutesDdmLon.value = (c_lon_min + (currentSeconds / 60)).toString(); 
                if (g_lon_deg !== undefined) {
                     ddLon.value = (g_lon_deg + (c_lon_min / 60) + (currentSeconds / 3600)).toString(); 
                } else {
                    ddLon.value = ((c_lon_min / 60) + (currentSeconds / 3600)).toString();
                }
            });

            secondsLon.addEventListener("input", function() {
                const currentSeconds = parseFloat(this.value) || 0;
                if (this.value === '') {
                    minutesDdmLon.value = (c_lon_min || 0).toString();
                    if (g_lon_deg !== undefined) ddLon.value = (g_lon_deg + (c_lon_min / 60)).toString(); 
                    else ddLon.value = ((c_lon_min / 60)).toString();
                    return;
                }
                minutesDdmLon.value = (c_lon_min + (currentSeconds / 60)).toString(); 
                if (g_lon_deg !== undefined) {
                    ddLon.value = (g_lon_deg + (c_lon_min / 60) + (currentSeconds / 3600)).toString(); 
                } else {
                     ddLon.value = ((c_lon_min / 60) + (currentSeconds / 3600)).toString();
                }
            });

            decimalDdmLon.addEventListener("input", function() { 
                const val = parseFloat(this.value);
                g_lon_deg = isNaN(val) ? (this.value === '' ? undefined : 0) : val;
                if (this.value === '') {
                    degreesLon.value = ''; 
                    let currentDDMMinutes = parseFloat(minutesDdmLon.value) || 0;
                    ddLon.value = (currentDDMMinutes / 60).toString();
                    return;
                }
                degreesLon.value = this.value; 
                let currentDDMMinutes = parseFloat(minutesDdmLon.value) || 0;
                ddLon.value = ((g_lon_deg || 0) + (currentDDMMinutes / 60)).toString(); 
            });
            
            minutesDdmLon.addEventListener("input", function() { 
                const currentDDMMinutes = parseFloat(this.value);
                if (isNaN(currentDDMMinutes) && this.value !== '') {
                     minutesLon.value = ''; secondsLon.value = '';
                     if (g_lon_deg !== undefined) ddLon.value = (g_lon_deg || 0).toString(); else ddLon.value = '';
                     return;
                }
                if (this.value === '') {
                    minutesLon.value = ''; secondsLon.value = '';
                     if (g_lon_deg !== undefined) ddLon.value = (g_lon_deg || 0).toString(); else ddLon.value = '';
                    return;
                }
                minutesLon.value = parseInt(currentDDMMinutes).toString();
                c_lon_min = parseInt(currentDDMMinutes);
                secondsLon.value = ((currentDDMMinutes - c_lon_min) * 60).toString(); 
                
                if (g_lon_deg !== undefined) {
                    ddLon.value = (g_lon_deg + (currentDDMMinutes / 60)).toString(); 
                } else {
                    ddLon.value = (currentDDMMinutes / 60).toString();
                }
            });

            ddLon.addEventListener("input", function() { 
                const currentDD = parseFloat(this.value);
                if (isNaN(currentDD) && this.value !== '') {
                    degreesLon.value = ''; minutesLon.value = ''; secondsLon.value = '';
                    decimalDdmLon.value = ''; minutesDdmLon.value = '';
                    return;
                }
                if (this.value === '') {
                    degreesLon.value = ''; minutesLon.value = ''; secondsLon.value = '';
                    decimalDdmLon.value = ''; minutesDdmLon.value = '';
                    return;
                }

                g_lon_deg = parseInt(currentDD); 
                degreesLon.value = g_lon_deg.toString();
                decimalDdmLon.value = g_lon_deg.toString(); 
                
                const remDecimalPart = currentDD - g_lon_deg;
                minutesDdmLon.value = (remDecimalPart * 60).toString(); 

                c_lon_min = parseInt(remDecimalPart * 60);
                minutesLon.value = c_lon_min.toString();
                
                secondsLon.value = (((remDecimalPart * 60) - c_lon_min) * 60).toFixed(4); 
            });

            document.getElementById("clearLongitude").addEventListener("click", function() {
                degreesLon.value = ""; minutesLon.value = ""; secondsLon.value = "";
                decimalDdmLon.value = ""; minutesDdmLon.value = ""; ddLon.value = "";
                g_lon_deg = undefined; c_lon_min = 0;
            });
        });
    </script>
</body>
</html>
